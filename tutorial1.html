<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tutorial 1: Displaying a 3D Object &mdash; ratCAVE 0.5.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ratCAVE 0.5.0 documentation" href="index.html" />
    <link rel="up" title="Tutorials" href="tutorials.html" />
    <link rel="next" title="Tutorial 2: Animating a Scene with Multiple Meshes, and using Multiple Scenes" href="tutorial2.html" />
    <link rel="prev" title="Tutorials" href="tutorials.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial-1-displaying-a-3d-object">
<h1>Tutorial 1: Displaying a 3D Object<a class="headerlink" href="#tutorial-1-displaying-a-3d-object" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>This tutorial will show the process of displaying a 3D object onscreen. This will be done in four steps:</dt>
<dd><ul class="first last simple">
<li>We&#8217;ll open a file containing 3D objects&#8211;a Wavefront .obj file containing basic 3D primitives that comes with ratCAVE (although you can use any .obj file outputted by 3D modeling software), using the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.WavefrontReader" title="ratcave.graphics.WavefrontReader"><code class="xref py py-class docutils literal"><span class="pre">WavefrontReader</span></code></a> class.</li>
<li>We then retrieve a <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Mesh" title="ratcave.graphics.Mesh"><code class="xref py py-class docutils literal"><span class="pre">Mesh</span></code></a> object from the file. Mesh objects contain all information about the object, including its position (inside its Local and World attributes, which are <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Physical" title="ratcave.graphics.Physical"><code class="xref py py-class docutils literal"><span class="pre">Physical</span></code></a> objects), color (inside its Material attribute, which are of the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Material" title="ratcave.graphics.Material"><code class="xref py py-class docutils literal"><span class="pre">Material</span></code></a> class), and even the vertex data itself (inside its Data attribute, which is a <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.MeshData" title="ratcave.graphics.MeshData"><code class="xref py py-class docutils literal"><span class="pre">MeshData</span></code></a> object).</li>
<li>We&#8217;ll put the Mesh inside a <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Scene" title="ratcave.graphics.Scene"><code class="xref py py-class docutils literal"><span class="pre">Scene</span></code></a> object, which is a container class that holds <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Mesh" title="ratcave.graphics.Mesh"><code class="xref py py-class docutils literal"><span class="pre">Mesh</span></code></a> objects, a <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Camera" title="ratcave.graphics.Camera"><code class="xref py py-class docutils literal"><span class="pre">Camera</span></code></a> object, and a <code class="xref py py-class docutils literal"><span class="pre">Light</span></code> object, along with an RGB background color. Multiple Scenes can be created, even ones that contain the same Meshes, and rendering one vs another one is as simple as changing which Scene is the active one inside the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window" title="ratcave.graphics.Window"><code class="xref py py-class docutils literal"><span class="pre">Window</span></code></a>.</li>
<li>Finally, we&#8217;ll put the Scene inside a <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window" title="ratcave.graphics.Window"><code class="xref py py-class docutils literal"><span class="pre">Window</span></code></a> object, and render it by calling its <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window.draw" title="ratcave.graphics.Window.draw"><code class="xref py py-meth docutils literal"><span class="pre">Window.draw()</span></code></a> and <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window.flip" title="ratcave.graphics.Window.flip"><code class="xref py py-meth docutils literal"><span class="pre">Window.flip()</span></code></a>  methods.</li>
</ul>
</dd>
</dl>
<div class="section" id="reading-a-wavefront-obj-file">
<h2>Reading a Wavefront .obj file<a class="headerlink" href="#reading-a-wavefront-obj-file" title="Permalink to this headline">¶</a></h2>
<p>Wavefront files can be exported from Blender, and they usually come in pairs&#8211; a .obj file contianing the spatial vertex data for each mesh, and a .mtl file containing the coloring data for each mesh.  In ratCAVE, .obj files are summarized in the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.MeshData" title="ratcave.graphics.MeshData"><code class="xref py py-class docutils literal"><span class="pre">MeshData</span></code></a> class and .mtl files are summarized in the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Material" title="ratcave.graphics.Material"><code class="xref py py-class docutils literal"><span class="pre">Material</span></code></a> class.  <code class="xref py py-class docutils literal"><span class="pre">Mesh</span></code> classes wrap both of these, plus containing a bit of extra functionality for dealing with these meshes as a whole (like moving the whole thing around, rotating it, or giving it certain image textures, things like that.).  Custom <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.MeshData" title="ratcave.graphics.MeshData"><code class="xref py py-class docutils literal"><span class="pre">MeshData</span></code></a> and <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Material" title="ratcave.graphics.Material"><code class="xref py py-class docutils literal"><span class="pre">Material</span></code></a> objects can be created, but often it is just easier to import them together in Wavefront files as <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Mesh" title="ratcave.graphics.Mesh"><code class="xref py py-class docutils literal"><span class="pre">Mesh</span></code></a> objects.  This is the purpose of the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.WavefrontReader" title="ratcave.graphics.WavefrontReader"><code class="xref py py-class docutils literal"><span class="pre">WavefrontReader</span></code></a> class.  We&#8217;ve included some files with primitive shapes with ratCAVE, whose paths you can find under <code class="xref py py-attr docutils literal"><span class="pre">graphics.resources</span></code>, to get you started:</p>
<div class="highlight-python"><div class="highlight"><pre>from ratcave import graphics

# Insert filename into WavefrontReader.
obj_filename = graphics.resources.obj_primitives
obj_reader = graphics.WavefrontReader(obj_filename)

# Check which meshes can be found inside the Wavefront file, and extract it into a Mesh object for rendering.
print(obj_reader.mesh_names)
&gt;&gt;&gt; [&#39;Torus&#39;, &#39;Sphere&#39;, &#39;Monkey&#39;, &#39;Cube&#39;]
</pre></div>
</div>
</div>
<div class="section" id="creating-a-mesh-from-the-wavefrontreader-and-positioning-it">
<h2>Creating a Mesh from the WavefrontReader and Positioning it<a class="headerlink" href="#creating-a-mesh-from-the-wavefrontreader-and-positioning-it" title="Permalink to this headline">¶</a></h2>
<p>The same keywords used for instantiating a Mesh can be used inside the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.WavefrontReader.get_mesh" title="ratcave.graphics.WavefrontReader.get_mesh"><code class="xref py py-meth docutils literal"><span class="pre">WavefrontReader.get_mesh()</span></code></a> method.  An important keyword is <strong>centered</strong>&#8211;if you leave it False (it is False by default), then the Mesh will appear wherever it was in the original file, which cana be found in its local.position attribute.  This is useful when you&#8217;ve pre-arranged the locations of everything in a 3D modelling program, but if you&#8217;d like to explicitly set its position, it can be a bit confusing.  So, we set its starting position to 0,0,0 by calling centered=True.  Then, we set local.position to a location in front of the camera:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">monkey</span> <span class="o">=</span> <span class="n">obj_reader</span><span class="o">.</span><span class="n">get_mesh</span><span class="p">(</span><span class="s">&quot;Monkey&quot;</span><span class="p">)</span>
<span class="n">monkey</span><span class="o">.</span><span class="n">local</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-scene">
<h2>Creating a Scene<a class="headerlink" href="#creating-a-scene" title="Permalink to this headline">¶</a></h2>
<p>To be rendered onscreen, you must first put <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Mesh" title="ratcave.graphics.Mesh"><code class="xref py py-class docutils literal"><span class="pre">Mesh</span></code></a> objects  can be put into a <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Scene" title="ratcave.graphics.Scene"><code class="xref py py-class docutils literal"><span class="pre">Scene</span></code></a>.  This may seem a bit too much when you have only one Mesh, but it allows for many advanced features.  For this exmple, we have just one, but we still need to put it in as a list.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">scene</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">Scene</span><span class="p">([</span><span class="n">monkey</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-a-window-and-rendering-the-scene">
<h2>Creating a Window and Rendering the Scene<a class="headerlink" href="#creating-a-window-and-rendering-the-scene" title="Permalink to this headline">¶</a></h2>
<p>Now, we put <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Scene" title="ratcave.graphics.Scene"><code class="xref py py-class docutils literal"><span class="pre">Scene</span></code></a> into a <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window" title="ratcave.graphics.Window"><code class="xref py py-class docutils literal"><span class="pre">Window</span></code></a>.  Currently, ratCAVE only uses Windows subclassed from PsychoPy, and many attributes used for PsychoPy Windows will work here.  We&#8217;ll delve more into this in future tutorials, along with a few gotchas, but for now, let&#8217;s just put the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Scene" title="ratcave.graphics.Scene"><code class="xref py py-class docutils literal"><span class="pre">Scene</span></code></a> into the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window" title="ratcave.graphics.Window"><code class="xref py py-class docutils literal"><span class="pre">Window</span></code></a> and draw it.  Notice that this always takes two steps&#8211;<a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window.draw" title="ratcave.graphics.Window.draw"><code class="xref py py-meth docutils literal"><span class="pre">Window.draw()</span></code></a>, which does all the heavy rendering on the GPU, and <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window.flip" title="ratcave.graphics.Window.flip"><code class="xref py py-meth docutils literal"><span class="pre">Window.flip()</span></code></a>, which actually sends the final image to the display.  These are separated to allow the user finer control of performance.  We&#8217;ll import PsychoPy&#8217;s getKeys() function as well, so that the script can be cleanly exited by pressing the &#8216;escape&#8217; key on the keyboard. The <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window" title="ratcave.graphics.Window"><code class="xref py py-class docutils literal"><span class="pre">Window</span></code></a> then will be explicitly closed by calling the <a class="reference internal" href="ratcave.graphics.html#ratcave.graphics.Window.close" title="ratcave.graphics.Window.close"><code class="xref py py-meth docutils literal"><span class="pre">Window.close()</span></code></a> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">window</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">events</span>

<span class="k">while</span> <span class="s">&#39;escape&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">getKeys</span><span class="p">():</span>
    <span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>That&#8217;s it!  Here&#8217;s the final script, in one place.  This script wll be modified in the next tutorial to animate the scene.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ratcave</span> <span class="kn">import</span> <span class="n">graphics</span>
<span class="kn">from</span> <span class="nn">psychopy</span> <span class="kn">import</span> <span class="n">events</span>

<span class="c"># Insert filename into WavefrontReader.</span>
<span class="n">obj_filename</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">resources</span><span class="o">.</span><span class="n">obj_primitives</span>
<span class="n">obj_reader</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">WavefrontReader</span><span class="p">(</span><span class="n">obj_filename</span><span class="p">)</span>

<span class="c"># Create Mesh</span>
<span class="n">monkey</span> <span class="o">=</span> <span class="n">obj_reader</span><span class="o">.</span><span class="n">get_mesh</span><span class="p">(</span><span class="s">&quot;Monkey&quot;</span><span class="p">)</span>
<span class="n">monkey</span><span class="o">.</span><span class="n">local</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span>

<span class="c"># Create Scene</span>
<span class="n">scene</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">Scene</span><span class="p">([</span><span class="n">monkey</span><span class="p">])</span>

<span class="c"># Create Window</span>
<span class="n">window</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">Window</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>

<span class="k">while</span> <span class="s">&#39;escape&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">getKeys</span><span class="p">():</span>
    <span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>

<span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/ratcave_example.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tutorial 1: Displaying a 3D Object</a><ul>
<li><a class="reference internal" href="#reading-a-wavefront-obj-file">Reading a Wavefront .obj file</a></li>
<li><a class="reference internal" href="#creating-a-mesh-from-the-wavefrontreader-and-positioning-it">Creating a Mesh from the WavefrontReader and Positioning it</a></li>
<li><a class="reference internal" href="#creating-a-scene">Creating a Scene</a></li>
<li><a class="reference internal" href="#creating-a-window-and-rendering-the-scene">Creating a Window and Rendering the Scene</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="tutorials.html">Tutorials</a><ul>
      <li>Previous: <a href="tutorials.html" title="previous chapter">Tutorials</a></li>
      <li>Next: <a href="tutorial2.html" title="next chapter">Tutorial 2: Animating a Scene with Multiple Meshes, and using Multiple Scenes</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tutorial1.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Nicholas A. Del Grosso.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/tutorial1.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>